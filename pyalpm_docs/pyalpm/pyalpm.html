
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pyalpm &#8212; pyalpm 0.9.2 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Handles" href="Handle.html" />
    <link rel="prev" title="Pyalpm documentation" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pyalpm">
<h1>Pyalpm<a class="headerlink" href="#pyalpm" title="Permalink to this headline">¶</a></h1>
<p>Pyalpm is a Python module that provides native bindings libalpm to interact
with Arch Linux package databases.</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Handle.html">Handles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Database.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="Package.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Pyalpm.html">pyalpm</a></li>
<li class="toctree-l1"><a class="reference internal" href="Transaction.html">Transactions</a></li>
</ul>
</div>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to get access to a pacman database is by means of the handle
object. To obtain a handle object, you need to initialize it with a rootdir
parameter (i.e., the –root path parameter in pacman) and a database location
(i.e., a –dbpath parameter):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyalpm</span> <span class="kn">import</span> <span class="n">Handle</span>
<span class="n">handle</span> <span class="o">=</span> <span class="n">Handle</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;/var/lib/pacman&quot;</span><span class="p">)</span>
<span class="n">localdb</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">get_localdb</span><span class="p">()</span>
</pre></div>
</div>
<p>The above code sample will provide you with a localdb object, that you can use
to query, for example, package information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">coreutils</span> <span class="o">=</span> <span class="n">localdb</span><span class="o">.</span><span class="n">get_pkg</span><span class="p">(</span><span class="s2">&quot;coreutils&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The call to get_pkg will provide you with the package passed as the name (in
this case, “coreutils”), you can query information about the package using this
reference.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">coreutils</span><span class="o">.</span><span class="n">packager</span><span class="p">)</span>
<span class="c1"># &#39;John Doe &lt;johndoe@archlinux.org&gt;&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">coreutils</span><span class="o">.</span><span class="n">licenses</span><span class="p">)</span>
<span class="c1"># [&#39;GPL3&#39;]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">coreutils</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
<span class="c1"># &#39;8.30-1&#39;</span>
</pre></div>
</div>
<p>You can see what other properties belong to the package object by looking at
the Package page.</p>
<p>A Handle object can also provide a sync database to you:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyalpm</span>
<span class="kn">from</span> <span class="nn">pyalpm</span> <span class="kn">import</span> <span class="n">Handle</span>
<span class="n">handle</span> <span class="o">=</span> <span class="n">Handle</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;/var/lib/pacman/&#39;</span><span class="p">)</span>
<span class="n">core</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">register_syncdb</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="n">pyalpm</span><span class="o">.</span><span class="n">SIG_DATABASE</span><span class="p">)</span>
</pre></div>
</div>
<p>The parameters required in this case are a database name (“core”) and a flag to
indicate the type of PGP level of verification that should be done on the
database. You can read more about the second flag in the SIG section of this
manual.</p>
<p>A syncdb is similar to a localdb (they are, in fact, both DB objects), but some
minor differences such as the installed size being 0 (as the packages are not
installed yet) and the download size of packages not being necessarilly 0 (as
the packages may have not been downloaded yet).</p>
<p>You can use the syncdb to, for example, search for packages:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;linux.*&quot;</span><span class="p">)</span>
<span class="c1"># a bunch of packages with linux in their name</span>

<span class="n">linux</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">get_pkg</span><span class="p">(</span><span class="s2">&quot;linux&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">linux</span><span class="o">.</span><span class="n">download_size</span><span class="p">)</span>
<span class="c1"># around 70 megabytes</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pyalpm</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pyalpm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Handle.html">Handles</a></li>
<li class="toctree-l2"><a class="reference internal" href="Database.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="Package.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="Pyalpm.html">pyalpm</a></li>
<li class="toctree-l2"><a class="reference internal" href="Transaction.html">Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Pyalpm documentation</a></li>
      <li>Next: <a href="Handle.html" title="next chapter">Handles</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Dan McGee <dan@archlinux.org>, Imanol Celaya <ilcra1989@gmail.com>, Jelle van der Waa <jelle@vdwaa.nl>, Øyvind Heggstad <mrelendig@har-ikkje.net>, Rémy Oudompheng <remy@archlinux.org>, Tasos Latsas <tlatsas2000@gmail.com>, Xyne <xyne@archlinux.ca>.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/pyalpm/pyalpm.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>